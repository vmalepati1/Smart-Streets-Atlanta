<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Streets Atlanta - Safer Micromobility for Everyone</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .hero {
            background: url('assets/atlanta-background.jpg') center/cover no-repeat;
            color: white;
            padding: 100px 20px 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('assets/atlanta-background.jpg') center/cover no-repeat;
            filter: blur(3px);
            z-index: -1;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: 0;
        }

        .hero .container {
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .hero h1 {
            font-size: 3em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.3em;
            margin-bottom: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cta-button {
            padding: 15px 35px;
            font-size: 1.1em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .cta-primary {
            background: #ffd700;
            color: #333;
            font-weight: 600;
        }

        .cta-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        section {
            padding: 80px 20px;
        }

        .section-title {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-align: center;
            color: #667eea;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.2em;
            color: #666;
            margin-bottom: 50px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .problem-section {
            background: #f8f9fa;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
            grid-auto-rows: 1fr;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 3em;
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            color: #666;
        }

        /* Problem in Pictures gallery */
        .problem-pictures {
            padding-top: 20px;
            padding-bottom: 20px;
        }

        .problem-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 24px;
        }

        .problem-gallery img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            display: block;
        }

        @media (max-width: 900px) {
            .problem-gallery {
                grid-template-columns: repeat(2, 1fr);
            }
            /* Make the third picture span the full row and center across the page */
            .problem-gallery img:nth-child(3) {
                grid-column: 1 / -1;
                width: 60%;
                margin-left: auto;
                margin-right: auto;
                justify-self: center;
            }
        }

        @media (max-width: 560px) {
            .problem-gallery {
                grid-template-columns: 1fr;
            }
            .problem-gallery img { height: 180px; }
            /* For very small screens, make the third image slightly narrower and centered (full-row) */
            .problem-gallery img:nth-child(3) {
                grid-column: 1 / -1;
                width: 80%;
                margin-left: auto;
                margin-right: auto;
                justify-self: center;
            }
        }

        /* Center the third solution card when layout collapses */
        @media (max-width: 900px) {
            .solutions-grid .solution-card:nth-child(3) {
                grid-column: 1 / -1;
                width: 60%;
                margin-left: auto;
                margin-right: auto;
            }
        }

        .poster-section {
            background: white;
            text-align: center;
        }

        .poster-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .poster-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s;
            font-weight: 500;
        }

        .control-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .poster-viewer {
            width: 100%;
            height: 600px;
            overflow: hidden;
            border-radius: 10px;
            background: white;
            position: relative;
            cursor: grab;
            border: 2px solid #e0e0e0;
        }

        .poster-viewer:active {
            cursor: grabbing;
        }

        .poster-viewer.fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            border-radius: 0;
            margin: 0;
        }

        .poster-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.1s ease-out;
        }

        .poster-viewer img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            user-select: none;
            pointer-events: none;
        }

        .solutions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-top: 50px;
        }

        .solution-card {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .solution-card:hover {
            transform: translateY(-5px);
        }

        .solution-icon {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .solution-card h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #667eea;
        }

        .solution-card p {
            color: #666;
            margin-bottom: 15px;
        }

        .solution-details {
            list-style: none;
            padding: 0;
        }

        .solution-details li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            color: #555;
        }

        .solution-details li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
        }

        .get-involved {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }

        .get-involved .section-title {
            color: white;
        }

        .get-involved .section-subtitle {
            color: rgba(255,255,255,0.9);
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .action-card {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .action-card h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .social-link {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 30px;
            background: #ffd700;
            color: #333;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: transform 0.3s;
        }

        .social-link:hover {
            transform: scale(1.05);
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        footer p {
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2em;
            }

            .hero p {
                font-size: 1.1em;
            }

            .section-title {
                font-size: 2em;
            }

            .solutions-grid,
            .stats-grid,
            .action-grid {
                grid-template-columns: 1fr;
            }
        }

        /* View Data button */
        .view-data-btn {
            margin-top: 15px;
            padding: 8px 14px;
            background: transparent;
            color: #333;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .view-data-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 14px rgba(0,0,0,0.08);
        }

        /* Ensure the view button sits at the bottom of the card */
        .stat-card .view-data-btn {
            margin-top: 12px;
            align-self: center;
        }

        /* Group number + label so their spacing is consistent */
        .stat-content {
            text-align: center;
        }

        .stat-number {
            margin-bottom: 10px;
        }

        .stat-label {
            margin-bottom: 8px;
        }

        /* Modal styles for displaying data images (with animation) */
        .modal {
            display: flex;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 220ms ease, visibility 220ms ease;
        }

        .modal[aria-hidden="false"] {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .modal-content {
            position: relative;
            max-width: 1000px;
            width: 100%;
            max-height: 90vh;
            background: #fff;
            padding: 16px;
            border-radius: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
            display: flex;
            justify-content: center;
            align-items: center;
            transform: translateY(10px) scale(0.98);
            transition: transform 220ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease;
            opacity: 0;
        }

        .modal[aria-hidden="false"] .modal-content {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .modal-image {
            max-width: 100%;
            max-height: 80vh;
            display: block;
        }

        .modal-close {
            position: absolute;
            top: 8px;
            right: 8px;
            background: transparent;
            border: none;
            color: #333;
            font-size: 1.2em;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <script>
        // Interactive Poster Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const viewer = document.getElementById('posterViewer');
            const wrapper = document.getElementById('posterWrapper');
            const image = document.getElementById('posterImage');
            const zoomInBtn = document.getElementById('zoomIn');
            const zoomOutBtn = document.getElementById('zoomOut');
            const resetBtn = document.getElementById('resetZoom');
            const fullscreenBtn = document.getElementById('fullscreen');

            let scale = 1;
            let panning = false;
            let pointX = 0;
            let pointY = 0;
            let start = { x: 0, y: 0 };
            let isFullscreen = false;

            function setTransform() {
                wrapper.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`;
            }

            // Zoom controls
            zoomInBtn.addEventListener('click', function() {
                scale = Math.min(scale + 0.3, 4);
                setTransform();
            });

            zoomOutBtn.addEventListener('click', function() {
                scale = Math.max(scale - 0.3, 0.5);
                setTransform();
            });

            resetBtn.addEventListener('click', function() {
                scale = 1;
                pointX = 0;
                pointY = 0;
                setTransform();
            });

            // Fullscreen toggle
            fullscreenBtn.addEventListener('click', function() {
                viewer.classList.toggle('fullscreen');
                isFullscreen = !isFullscreen;
                fullscreenBtn.textContent = isFullscreen ? '‚úï Exit Fullscreen' : '‚õ∂ Fullscreen';
                
                // Reset position when entering fullscreen
                if (isFullscreen) {
                    scale = 1;
                    pointX = 0;
                    pointY = 0;
                    setTransform();
                }
            });

            // Pan functionality
            viewer.addEventListener('mousedown', function(e) {
                e.preventDefault();
                start = { x: e.clientX - pointX, y: e.clientY - pointY };
                panning = true;
            });

            viewer.addEventListener('mouseup', function() {
                panning = false;
            });

            viewer.addEventListener('mousemove', function(e) {
                if (!panning) return;
                e.preventDefault();
                pointX = e.clientX - start.x;
                pointY = e.clientY - start.y;
                setTransform();
            });

            viewer.addEventListener('mouseleave', function() {
                panning = false;
            });

            // Touch support for mobile
            let touchStart = { x: 0, y: 0 };
            
            viewer.addEventListener('touchstart', function(e) {
                if (e.touches.length === 1) {
                    touchStart = {
                        x: e.touches[0].clientX - pointX,
                        y: e.touches[0].clientY - pointY
                    };
                }
            });

            viewer.addEventListener('touchmove', function(e) {
                if (e.touches.length === 1) {
                    e.preventDefault();
                    pointX = e.touches[0].clientX - touchStart.x;
                    pointY = e.touches[0].clientY - touchStart.y;
                    setTransform();
                }
            });

            // Mouse wheel zoom
            viewer.addEventListener('wheel', function(e) {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -0.1 : 0.1;
                scale = Math.max(0.5, Math.min(4, scale + delta));
                setTransform();
            });

            // Double-click to toggle fullscreen
            viewer.addEventListener('dblclick', function() {
                fullscreenBtn.click();
            });

            // Exit fullscreen with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && isFullscreen) {
                    fullscreenBtn.click();
                }
            });
        });
    </script>
    <!-- Hero Section -->
    <div class="hero">
        <div class="container">
            <h1>Safe Streets: Making Atlanta's Streets Safe for Everyone</h1>
            <p>E-scooters and e-bikes promise sustainable mobility, but rising injuries and sidewalk conflicts threaten pedestrian safety. It's time for Smart Streets.</p>
            <div class="cta-buttons">
                <a href="#solutions" class="cta-button cta-secondary">See Our Plan</a>
                <a href="#get-involved" class="cta-button cta-secondary">Get Involved</a>
            </div>
        </div>
    </div>

    <!-- Problem Section -->
    <section class="problem-section">
        <div class="container">
            <h2 class="section-title">The Problem We're Facing</h2>
            <p class="section-subtitle">Micromobility is exploding in popularity, but <strong style="color: #e74c3c;">safety hasn't kept pace</strong>. Atlanta's infrastructure and policies are struggling to protect riders and pedestrians alike.</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-number">373</div>
                        <div class="stat-label"><strong style="color: #e74c3c;">Deaths</strong> from micromobility devices (2017-2022) in the U.S.</div>
                    </div>
                    <button class="view-data-btn" data-image="assets/fatality_data.png">View the Data</button>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-number">209,600</div>
                        <div class="stat-label"><strong style="color: #e74c3c;">Emergency department</strong> visits (2017-2023) in the U.S.</div>
                    </div>
                    <button class="view-data-btn" data-image="assets/ed_data.png">View the Data</button>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-number">10</div>
                        <div class="stat-label"><strong style="color: #e74c3c;">Deaths</strong> in Atlanta</div>
                    </div>
                    <button class="view-data-btn" data-image="assets/atl_death_data.png">View the Data</button>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-number">80-100</div>
                        <div class="stat-label">E-scooter <strong style="color: #e74c3c;">injuries</strong> per month (Grady Hospital)</div>
                    </div>
                    <button class="view-data-btn" data-image="assets/atl_per_month_data.png">View the Data</button>
                </div>
            </div>

            <p style="margin-top: 40px; text-align: center; font-size: 1.1em; max-width: 800px; margin-left: auto; margin-right: auto; color: #555;">
                Research shows that <strong style="color: #e74c3c;">sidewalk riding doubles injury risk</strong>, yet riders feel <strong style="color: #e74c3c;">unsafe on roads</strong> without protected lanes. Meanwhile, <strong style="color: #e74c3c;">scooters cluttering</strong> sidewalks create hazards for pedestrians, especially those with disabilities. Without proper infrastructure, education, and enforcement, these problems will <strong style="color: #e74c3c;">only worsen</strong>.
            </p>
        </div>
    </section>

    <!-- Data modal (hidden until a 'View the Data' button is clicked) -->
    <div id="dataModal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true">
            <button class="modal-close" id="modalClose" aria-label="Close">‚úï</button>
            <img src="" alt="Data visualization" id="modalImage" class="modal-image">
        </div>
    </div>

    <!-- The Problem in Pictures -->
    <section class="problem-pictures">
        <div class="container">
            <h2 class="section-title">The Problem in Pictures</h2>
            <p class="section-subtitle">Pictures taken in Atlanta illustrating <strong style="color: #e74c3c;">improper parking</strong> of micromobility devices, which can be <strong style="color: #e74c3c;">dangerous</strong> for pedestrians and other users of the road. The first image was taken on <strong style="color: #e74c3c;">Ponce de Leon Avenue</strong>, while the last was taken on <strong style="color: #e74c3c;">Georgia Tech's campus</strong>.</p>

            <div class="problem-gallery">
                <img src="assets/problem1.png" alt="Problem image 1">
                <img src="assets/problem2.png" alt="Problem image 2">
                <img src="assets/problem3.png" alt="Problem image 3">
            </div>
        </div>
    </section>
    <!-- Solutions Section -->
    <section id="solutions">
        <div class="container">
            <h2 class="section-title">Our Three-Part Solution</h2>
            <p class="section-subtitle">Smart Streets combines technology, infrastructure, and education to create safer streets for everyone</p>
            
            <div class="solutions-grid">
                <div class="solution-card">
                    <div class="solution-icon">üìç</div>
                    <h3>Geofenced Safety Zones</h3>
                    <p>Using GPS technology to automatically slow scooters in high-risk areas and establish no-ride zones around pedestrian hotspots.</p>
                    <ul class="solution-details">
                        <li>Speed caps of 10 mph in dense areas</li>
                        <li>Expanded no-ride zones on campuses and plazas</li>
                        <li>Smart ordinances with escalating fines</li>
                        <li>Partnership with Lime, Bird, and APD</li>
                    </ul>
                    <p style="margin-top: 20px; font-weight: 600;">Budget: $1,850,000 | Timeline: 6 months</p>
                </div>

                <div class="solution-card">
                    <div class="solution-icon">üõ£Ô∏è</div>
                    <h3>Dedicated Infrastructure</h3>
                    <p>Building the physical infrastructure Atlanta needs: protected lanes, designated parking corrals, and clear signage.</p>
                    <ul class="solution-details">
                        <li>Protected micromobility lanes on key corridors</li>
                        <li>Designated parking corrals with GPS guidance</li>
                        <li>Enhanced signage at crossings and pedestrian zones</li>
                        <li>Focus on Midtown, Downtown, and BeltLine</li>
                    </ul>
                    <p style="margin-top: 20px; font-weight: 600;">Budget: $2,600,000 | Timeline: 3-4 months</p>
                </div>

                <div class="solution-card">
                    <div class="solution-icon">üìö</div>
                    <h3>"Share the Path" Campaign</h3>
                    <p>A comprehensive public education initiative to build awareness and accountability among all road users.</p>
                    <ul class="solution-details">
                        <li>Safety infographics across bus shelters and MARTA</li>
                        <li>Micromobility Ambassador program</li>
                        <li>Pop-up safety demonstrations at hotspots</li>
                        <li>Behavioral surveys to measure impact</li>
                    </ul>
                    <p style="margin-top: 20px; font-weight: 600;">Budget: $950,000 | Timeline: 4 months</p>
                </div>
            </div>

            <p style="margin-top: 60px; text-align: center; font-size: 1.2em; max-width: 900px; margin-left: auto; margin-right: auto; color: #555;">
                Our approach is evidence-based, addressing all four factors that impact micromobility safety: human behavior, device features, policy decisions, and road infrastructure. By tackling these comprehensively, we can reduce injuries while preserving the environmental and accessibility benefits of micromobility.
            </p>
        </div>
    </section>

    <!-- Poster Section -->
    <section class="poster-section">
        <div class="container">
            <h2 class="section-title">Our Campaign</h2>
            <p class="section-subtitle">Mind the Micromobility - Equity on the Roads at All Costs</p>
            <div class="poster-container">
                <div class="poster-controls">
                    <button class="control-btn" id="zoomIn">üîç Zoom In</button>
                    <button class="control-btn" id="zoomOut">üîç Zoom Out</button>
                    <button class="control-btn" id="resetZoom">‚Ü∫ Reset</button>
                    <button class="control-btn" id="fullscreen">‚õ∂ Fullscreen</button>
                </div>
                <div class="poster-viewer" id="posterViewer">
                    <div class="poster-wrapper" id="posterWrapper">
                        <img src="assets/poster.png" alt="Mind the Micromobility Poster" id="posterImage">
                    </div>
                </div>
                <p style="margin-top: 15px; color: #666; font-size: 0.95em;">
                    üí° Click and drag to pan ‚Ä¢ Use controls to zoom ‚Ä¢ Double-click for fullscreen
                </p>
            </div>
        </div>
    </section>

    <!-- Get Involved Section -->
    <section id="get-involved" class="get-involved">
        <div class="container">
            <h2 class="section-title">Get Involved</h2>
            <p class="section-subtitle">Everyone has a role to play in making Atlanta's streets safer</p>
            
            <div class="action-grid">
                <div class="action-card">
                    <h3>üó£Ô∏è Spread Awareness</h3>
                    <p>Share our campaign on social media and talk to friends about safe riding practices. Public support drives policy change.</p>
                </div>

                <div class="action-card">
                    <h3>‚úÖ Follow Safety Rules</h3>
                    <p>Ride in bike lanes, yield to pedestrians, park responsibly, and wear a helmet. Be part of the solution.</p>
                </div>

                <div class="action-card">
                    <h3>üì¢ Report Issues</h3>
                    <p>Contact Atlanta Police and transportation officials when you see dangerous riding or improperly parked scooters.</p>
                </div>

                <div class="action-card">
                    <h3>üìù Support Legislation</h3>
                    <p>Contact Atlanta Department of Transportation and your city council representatives to support Smart Streets initiatives.</p>
                </div>
            </div>

            <div style="margin-top: 50px;">
                <a href="https://instagram.com/ride_right" class="social-link" target="_blank">Follow us @RIDE_RIGHT on Instagram</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p><strong>Smart Streets Initiative</strong></p>
            <p>A project by Jerry Song, Vikas Malepati, and Knox Kim</p>
            <p>Georgia Institute of Technology | October 2025</p>
            <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                Proposal submitted to Atlanta Department of Transportation
            </p>
        </div>
    </footer>
    <script>
        (function() {
            const modal = document.getElementById('dataModal');
            const modalImage = document.getElementById('modalImage');
            const modalClose = document.getElementById('modalClose');

            function openDataModal(src, alt) {
                modalImage.src = src;
                modalImage.alt = alt || 'Data visualization';
                modal.setAttribute('aria-hidden', 'false');
            }

            function closeDataModal() {
                modal.setAttribute('aria-hidden', 'true');
                // wait for the close animation to finish before clearing the image
                setTimeout(function() {
                    modalImage.src = '';
                }, 300);
            }

            document.querySelectorAll('.view-data-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const img = btn.getAttribute('data-image');
                    const labelEl = btn.closest('.stat-card') ? btn.closest('.stat-card').querySelector('.stat-label') : null;
                    const alt = labelEl ? labelEl.innerText : '';
                    openDataModal(img, alt);
                });
            });

            if (modalClose) modalClose.addEventListener('click', closeDataModal);

            modal.addEventListener('click', function(e) {
                if (e.target === modal) closeDataModal();
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.getAttribute('aria-hidden') === 'false') closeDataModal();
            });
        })();
    </script>
</body>
</html>